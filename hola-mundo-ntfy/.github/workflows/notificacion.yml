name: Enviar NotificaciÃ³n a ntfy

on:
  push:
    branches: [ main ]
  workflow_dispatch:

jobs:
  notificar:
    runs-on: ubuntu-latest
    steps:
      - name: Clonar repositorio
        uses: actions/checkout@v4

      - name: Configurar Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20'

      - name: Ejecutar Hola Mundo
        run: node index.js

      - name: Enviar notificaciÃ³n a ntfy
        uses: niniyas/ntfy-action@master
        if: always()
        with:
          url: 'https://ntfy.sh'
          topic: 'devops-itla-david'  # ğŸ¯ TÃ“PICO PERSONAL
          title: 'ğŸš€ David Guerrero - ActualizaciÃ³n'
          priority: 4
          tags: 'david,guerrero,itla,github-actions'
          details: |
            ğŸ“¦ Repositorio: hola-mundo-ntfy
            ğŸ”— Commit: ${{ github.sha }}
            ğŸ“ Mensaje: ${{ github.event.head_commit.message }}
            ğŸ‘¤ Autor: David Guerrero
            ğŸ“… Fecha: $(date)
            ğŸ” Ver cambios: ${{ github.event.compare }}
